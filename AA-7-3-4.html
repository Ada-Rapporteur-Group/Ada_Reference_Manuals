<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>Stable Properties of a Type</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.WideHanging-Body {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.8em; margin-top: 0em; margin-bottom: 0.6em}
    DIV.WideHanging-Term {float: left; font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 202y Draft 1)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-7-3-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-7-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>7.3.4 Stable Properties of a Type</H1>
<div class="paranum"><a name="p1">1/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0324-1.TXT">AI12-0324-1</A></I>} 
Certain characteristics of an object of a given type are unchanged by 
most of the primitive operations of the type. Such characteristics are 
called <I>stable properties</I> of the type.<A NAME="I4471"></A><A NAME="I4472"></A></div>
<div class="paranum"><a name="p1.a">1.a/5</a></div>
<div class="Annotations"><B>Term entry:&nbsp;</B><B>stable property</B> &mdash; 
characteristic associated with objects of a given type that is preserved 
by many of the primitive operations of the type</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p2">2/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
A <I>property function</I> of type <I>T</I> is a function with a single 
parameter of type <I>T</I> or of a class-wide type that covers <I>T</I>.<A NAME="I4473"></A><A NAME="I4474"></A></div>
<div class="paranum"><a name="p2.a">2.a/5</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>This provides restrictions on 
name resolution so overloaded functions can be used as a stable property 
function.&nbsp;</div>
<div class="paranum"><a name="p3">3/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0285-1.TXT">AI12-0285-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0324-1.TXT">AI12-0324-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0388-1.TXT">AI12-0388-1</A></I>} 
A <I>type property aspect definition</I> is <A NAME="I4475"></A>a list 
of <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>s written 
in the syntax of a <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0114">positional_array_aggregate</A></SPAN>. 
A <I>subprogram property aspect definition</I><A NAME="I4476"></A> is 
a list of <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>s, 
each optionally preceded by reserved word <B>not</B>, also written in 
the syntax of a <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0114">positional_array_aggregate</A></SPAN>.</div>
<div class="paranum"><a name="p3.a">3.a/5</a></div>
<div class="Annotations"><B>To be honest:&nbsp;</B>A single <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
would technically be a parenthesized <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
rather than an <SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN>; 
we mean to include that here. We say &quot;syntax of a <SPAN Class="swiss"><A HREF="AA-4-3-3.html#S0114">positional_array_aggregate</A></SPAN>&quot; 
to hopefully clarify that the specification is in no other way an actual 
<SPAN Class="swiss"><A HREF="AA-4-3.html#S0106">aggregate</A></SPAN>. 
</div>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0272-1.TXT">AI12-0272-1</A></I>} 
For a nonformal private type, nonformal private extension, or full type 
that does not have a partial view, the following language-defined aspects 
may be specified with an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN> 
(see <A HREF="AA-13-1-1.html">13.1.1</A>):</div>
<div class="paranum"><a name="p5">5/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0285-1.TXT">AI12-0285-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0405-1.TXT">AI12-0405-1</A></I>} 
Stable_Properties</div><div class="WideHanging-Body"><br clear="left">
This aspect shall be specified by a type property aspect definition; 
each <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
shall statically denote a single property function of the type. This 
aspect defines the <I>specific stable property functions</I> of the associated 
type.<A NAME="I4477"></A><A NAME="I4478"></A><A NAME="I4479"></A><A NAME="I4480"></A></div>
<div class="paranum"><a name="p5.a">5.a/5</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>We do not allow this aspect 
on generic formal types, as it is only meaningful for primitive subprograms 
and generic formal types have no such subprograms.&nbsp;</div>
<div class="paranum"><a name="p5.b">5.b/5</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Class-wide aspects are 
only allowed on tagged types (see <A HREF="AA-13-1-1.html">13.1.1</A>), 
so we don't say that here.&nbsp;</div>
<div class="paranum"><a name="p5.c">5.c/5</a></div>
<div class="Annotations"><B>Aspect Description for&nbsp;</B><B>Stable_Properties: 
</B>A list of functions describing characteristics that usually are unchanged 
by primitive operations of the type or an individual primitive subprogram.</div>
<div class="paranum"><a name="p6">6/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0285-1.TXT">AI12-0285-1</A></I>} 
Stable_Properties'Class</div><div class="WideHanging-Body"><br clear="left">
This aspect shall be specified by a type property aspect definition; 
each <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
shall statically denote a single property function of the type. This 
aspect defines the <I>class-wide stable property functions</I> of the 
associated type. [Unlike most class-wide aspects, Stable_Properties'Class 
is not inherited by descendant types and subprograms, but the enhanced 
class-wide postconditions are inherited in the normal manner.]<A NAME="I4481"></A><A NAME="I4482"></A><A NAME="I4483"></A><A NAME="I4484"></A></div>
<div class="paranum"><a name="p6.a">6.a/5</a></div>
<div class="Annotations"><B>Proof:&nbsp;</B>Class-wide inheritance has to 
be explicitly defined. Here we are not making such a definition, so there 
is no inheritance. <A HREF="AA-6-1-1.html">6.1.1</A> defines the inheritance 
of class-wide postconditions.&nbsp;</div>
<div class="paranum"><a name="p6.b">6.b/5</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>Since class-wide postconditions 
are inherited by descendants, we don't need the stable property functions 
to be inherited; if they were inherited, we'd be duplicating the checks, 
which we don't want.&nbsp;</div>
<div class="paranum"><a name="p6.c">6.c/5</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Class-wide aspects are 
only allowed on primitive subprograms of tagged types (see <A HREF="AA-13-1-1.html">13.1.1</A>), 
so we don't say that here.&nbsp;</div>
<div class="paranum"><a name="p6.d">6.d/5</a></div>
<div class="Annotations"><B>Aspect Description for&nbsp;</B><B>Stable_Properties'Class: 
</B>A list of functions describing characteristics that usually are unchanged 
by primitive operations of a class of types or a primitive subprogram 
for such a class.</div>
<div class="paranum"><a name="p7">7/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0405-1.TXT">AI12-0405-1</A></I>} 
The specific and class-wide stable properties of a type together comprise 
the stable properties of the type.<A NAME="I4485"></A><A NAME="I4486"></A> 
<A NAME="I4487"></A></div>
<div class="paranum"><a name="p8">8/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
For a primitive subprogram, the following language-defined aspects may 
be specified with an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0346">aspect_specification</A></SPAN> 
(see <A HREF="AA-13-1-1.html">13.1.1</A>):</div>
<div class="paranum"><a name="p9">9/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0285-1.TXT">AI12-0285-1</A></I>} 
Stable_Properties</div><div class="WideHanging-Body"><br clear="left">
This aspect shall be specified by a subprogram property aspect definition; 
each <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
shall statically denote a single property function of a type for which 
the associated subprogram is primitive.</div>
<div class="paranum"><a name="p10">10/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0285-1.TXT">AI12-0285-1</A></I>} 
Stable_Properties'Class</div><div class="WideHanging-Body"><br clear="left">
This aspect shall be specified by a subprogram property aspect definition; 
each <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
shall statically denote a single property function of a tagged type for 
which the associated subprogram is primitive. [Unlike most class-wide 
aspects, Stable_Properties'Class is not inherited by descendant subprograms, 
but the enhanced class-wide postconditions are inherited in the normal 
manner.]</div>
<div class="paranum"><a name="p10.a">10.a/5</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>The subprogram versions of Stable_Properties 
are provided to allow overriding the stable properties of a type for 
an individual primitive subprogram. While they can be used even if the 
type has no stable properties, that is not an intended use (as simply 
modifying the postcondition directly makes more sense for something that 
only happens in one place).&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p11">11/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
A stable property function of a type <I>T</I> shall have a nonlimited 
return type and shall be:</div>
<div class="paranum"><a name="p12">12/5</a></div>
<div class="Bulleted">a primitive function with a single parameter of 
mode <B>in</B> of type <I>T</I>; or</div>
<div class="paranum"><a name="p13">13/5</a></div>
<div class="Bulleted">a function that is declared immediately within 
the declarative region in which an ancestor type of <I>T</I> is declared 
and has a single parameter of mode <B>in</B> of a class-wide type that 
covers <I>T</I>.&nbsp;</div>
<div class="paranum"><a name="p14">14/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0285-1.TXT">AI12-0285-1</A></I>} 
In a subprogram property aspect definition for a subprogram <I>S</I>:</div>
<div class="paranum"><a name="p15">15/5</a></div>
<div class="Bulleted">all or none of the items shall be preceded by <B>not</B>;</div>
<div class="paranum"><a name="p15.a">15.a/5</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Mixing <B>not</B> functions 
with regular functions is not allowed.&nbsp;</div>
<div class="paranum"><a name="p16">16/5</a></div>
<div class="Bulleted">any property functions mentioned after <B>not</B> 
shall be a stable property function of a type for which <I>S</I> is primitive. 
</div>
<div class="paranum"><a name="p17">17/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0405-1.TXT">AI12-0405-1</A></I>} 
If a <SPAN Class="swiss"><A HREF="AA-8-5-4.html#S0242">subprogram_renaming_declaration</A></SPAN> 
declares a primitive subprogram of a type <I>T</I>, then the renamed 
callable entity shall also be a primitive subprogram of type <I>T</I> 
and the two primitive subprograms shall have the same specific stable 
property functions and the same class-wide stable property functions 
(see below).</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p18">18/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
For a primitive subprogram <I>S</I> of a type <I>T</I>, the specific 
stable property functions of <I>S</I> for type <I>T</I> are:</div>
<div class="paranum"><a name="p19">19/5</a></div>
<div class="Bulleted">if <I>S</I> has an aspect Stable_Properties specified 
that does not include <B>not</B>, those functions denoted in the aspect 
Stable_Properties for <I>S</I> that have a parameter of <I>T</I> or <I>T</I>'Class;</div>
<div class="paranum"><a name="p20">20/5</a></div>
<div class="Bulleted">if <I>S</I> has an aspect Stable_Properties specified 
that includes <B>not</B>, those functions denoted in the aspect Stable_Properties 
for <I>T</I>, excluding those denoted in the aspect Stable_Properties 
for <I>S</I>;</div>
<div class="paranum"><a name="p21">21/5</a></div>
<div class="Bulleted">if <I>S</I> does not have an aspect Stable_Properties, 
those functions denoted in the aspect Stable_Properties for <I>T</I>, 
if any.</div>
<div class="paranum"><a name="p21.a">21.a/5</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>A primitive subprogram can 
be primitive for more than one type, and thus there can be more than 
one such set of specific stable properties for a subprogram. Thus we 
say &ldquo;specific stable property functions for subprogram <I>S</I> 
for type <I>T</I>&rdquo;.&nbsp;</div>
<div class="paranum"><a name="p22">22/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
A similar definition applies for class-wide stable property functions 
by replacing aspect Stable_Properties with aspect Stable_Properties'Class 
in the above definition.</div>
<div class="paranum"><a name="p23">23/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
The <I>explicit</I> specific postcondition expression for a subprogram 
<I>S</I> is the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
directly specified for <I>S</I> with the Post aspect. Similarly, the 
<I>explicit</I> class-wide postcondition expression for a subprogram 
<I>S</I> is the <SPAN Class="swiss"><A HREF="AA-4-4.html#S0132">expression</A></SPAN> 
directly specified for <I>S</I> with the Post'Class aspect.<A NAME="I4488"></A><A NAME="I4489"></A><A NAME="I4490"></A></div>
<div class="paranum"><a name="p24">24/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
For a primitive subprogram <I>S</I> of a type <I>T</I> that has a parameter 
<I>P</I> of type <I>T</I>, the parameter is <I>excluded from stable property 
checks</I> if:<A NAME="I4491"></A></div>
<div class="paranum"><a name="p25">25/5</a></div>
<div class="Bulleted"><I>S</I> is a stable property function of <I>T</I>;</div>
<div class="paranum"><a name="p25.a">25.a/5</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>This prevents possible infinite 
recursion, where the postcondition calls the function itself (directly 
or indirectly).&nbsp;</div>
<div class="paranum"><a name="p26">26/5</a></div>
<div class="Bulleted"><I>P</I> has mode <B>out</B>;</div>
<div class="paranum"><a name="p26.a">26.a/5</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>A parameter of mode <B>out</B> 
doesn't necessarily have a defined input value, so there is no old value 
to compare with. Ideally, the postcondition will include expressions 
defining the values of the stable properties after the call, but we do 
not try to ensure this.&nbsp;</div>
<div class="paranum"><a name="p27">27/5</a></div>
<div class="Bulleted">the Global aspect of <I>S</I> is <B>null</B>, and 
<I>P</I> has mode <B>in</B> and the mode is not overridden by a global 
aspect.</div>
<div class="paranum"><a name="p27.a">27.a/5</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>An <B>in</B> parameter of a Global 
=&gt; <B>null</B> subprogram cannot be modified, even if it has indirect 
parts, without violating the Global aspect. Thus, there is no need to 
assert that the properties don't change.&nbsp;</div>
<div class="paranum"><a name="p28">28/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0324-1.TXT">AI12-0324-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0405-1.TXT">AI12-0405-1</A></I>} 
For every primitive subprogram <I>S</I> of a type <I>T</I> that is not 
an abstract subprogram or null procedure, the specific postcondition 
expression of <I>S</I> is modified to include expressions of the form 
<TT><I>F</I>(<I>P</I>) = <I>F</I>(<I>P</I>)'Old</TT>, all <B>and</B>ed 
with each other and any explicit specific postcondition expression, with 
one such equality included for each specific stable property function 
<I>F</I> of <I>S</I> for type <I>T</I> that does not occur in the explicit 
specific postcondition expression of <I>S</I>, and <I>P</I> is each parameter 
of <I>S</I> that has type <I>T</I> and is not excluded from stable property 
checks. The resulting specific postcondition expression of <I>S</I> is 
used in place of the explicit specific postcondition expression of <I>S</I> 
[when interpreting the meaning of the postcondition as defined in <A HREF="AA-6-1-1.html">6.1.1</A>].</div>
<div class="paranum"><a name="p28.a">28.a/5</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>There is one <TT>F(P) = 
F(P)'Old</TT> subexpression for every combination of a specific stable 
property function of type <I>T</I> and a parameter of type <I>T</I>. 
For instance, if there are three specific stable property functions for 
type <I>T</I> and two parameters of type <I>T</I>, then there are six 
such subexpressions appended to the postcondition.</div>
<div class="paranum"><a name="p28.b">28.b/5</a></div>
<div class="Annotations">The resulting specific postcondition is evaluated 
as described in <A HREF="AA-6-1-1.html">6.1.1</A>. One hopes that compilers 
can be smart enough to prove that many of these added postcondition subexpressions 
cannot fail, but that is not required here.&nbsp;</div>
<div class="paranum"><a name="p28.c">28.c/5</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>Null procedures and abstract 
subprograms are excluded as they do not allow specific postconditions. 
Moreover, for null procedures, static analysis tools can be certain that 
their parameters aren't modified so there is no need to assert that the 
properties don't change. Abstract subprograms cannot be directly called. 
</div>
<div class="paranum"><a name="p29">29/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0324-1.TXT">AI12-0324-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0405-1.TXT">AI12-0405-1</A></I>} 
For every primitive subprogram <I>S</I> of a type <I>T</I>, the class-wide 
postcondition expression of <I>S</I> is modified to include expressions 
of the form <TT><I>F</I>(<I>P</I>) = <I>F</I>(<I>P</I>)'Old</TT>, all 
<B>and</B>ed with each other and any explicit class-wide postcondition 
expression, with one such equality included for each class-wide stable 
property function <I>F</I> of <I>S</I> for type <I>T</I> that does not 
occur in any class-wide postcondition expression that applies to <I>S</I>, 
and <I>P</I> is each parameter of <I>S</I> that has type <I>T</I> and 
is not excluded from stable property checks. The resulting class-wide 
postcondition expression of <I>S</I> is used in place of the explicit 
class-wide postcondition expression of <I>S</I> [when interpreting the 
meaning of the postcondition as defined in <A HREF="AA-6-1-1.html">6.1.1</A>].</div>
<div class="paranum"><a name="p29.a">29.a/5</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>We suppress stable property expressions 
if the property function appears in the explicit class-wide postcondition, 
or in any inherited class-wide postconditions. If we didn't do that, 
we could have conflicting requirements in an inherited postcondition 
and the current one. We also avoid redundant property checks.&nbsp;</div>
<div class="paranum"><a name="p29.b">29.b/5</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>The resulting class-wide 
postcondition is evaluated as described in <A HREF="AA-6-1-1.html">6.1.1</A>. 
In particular, the enhanced class-wide postcondition <I>is</I> the class-wide 
postcondition for <I>S</I>, and therefore inherited postconditions include 
any stable property expressions for <I>S</I>.</div>
<div class="paranum"><a name="p29.c">29.c/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0405-1.TXT">AI12-0405-1</A></I>} 
In the case of a derived type <I>T</I>, when the preceding rules refer 
to &ldquo;every primitive subprogram <I>S</I> of a type <I>T</I>&rdquo;, 
the referenced set of subprograms includes any inherited subprograms. 
</div>
<div class="paranum"><a name="p30">30/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0405-1.TXT">AI12-0405-1</A></I>} 
The equality operation that is used in the aforementioned equality expressions 
is as described in the case of an individual membership test whose <SPAN Class="swiss"><A HREF="AA-4-4.html#S0137">membership_choice</A></SPAN> 
is a <I>choice_</I><SPAN Class="swiss"><A HREF="AA-4-4.html#S0138">simple_expression</A></SPAN> 
(see <A HREF="AA-4-5-2.html">4.5.2</A>).</div>
<div class="paranum"><a name="p31">31/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0405-1.TXT">AI12-0405-1</A></I>} 
The Post expression additions described above are enabled or disabled 
depending on the Post assertion policy that is in effect at the point 
of declaration of the subprogram <I>S</I>. A similar rule applies to 
the Post'Class expression additions.&nbsp;</div>
<div class="paranum"><a name="p32">32/5</a></div>
<div class="Notes">NOTE&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0112-1.TXT">AI12-0112-1</A></I>} 
For an example of the use of these aspects, see the Vector container 
definition in <A HREF="AA-A-18-2.html">A.18.2</A>.&nbsp;</div>

<H4 Class="centered">Extensions to Ada 2012</H4>
<div class="paranum"><a name="p32.a">32.a/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0187-1.TXT">AI12-0187-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0285-1.TXT">AI12-0285-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0405-1.TXT">AI12-0405-1</A></I>} 
<A NAME="I4492"></A>These aspects are new.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-7-3-3.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-7-4.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
