<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>User-Defined Indexing</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert6 {text-decoration: underline; color: rgb(0,51,204) }
    SPAN.delete6 {text-decoration: line-through; color: rgb(0,51,204) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Indented1 {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-bottom: 0.6em}
    DIV.Notes {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 4.3em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 4.0em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left:  10.2em; margin-bottom: 0.6em}
    DIV.Bulleted-NoPrefix {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.Bulleted {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 3.8em; margin-right: 2.0em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.WideHanging-Body {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.8em; margin-top: 0em; margin-bottom: 0.6em}
    DIV.WideHanging-Term {float: left; font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 202y Draft 1)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-1-5.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>4.1.6 User-Defined Indexing</H1>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p1">1/3</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
Given a tagged type <I>T</I>, the following type-related, operational 
aspects may be specified:</div>
<div class="paranum"><a name="p2">2/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0428-1.TXT">AI12-0428-1</A></I>} 
Constant_Indexing</div><div class="WideHanging-Body"><br clear="left">
This aspect shall be specified by a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
that denotes one or more functions declared immediately within the same 
declaration list in which <I>T</I>, or the declaration completed by <I>T</I>, 
is declared. All such functions shall have at least two parameters, the 
first of which is of type <I>T</I> or <I>T</I>'Class, or is an access-to-constant 
parameter with designated type <I>T</I> or <I>T</I>'Class.<A NAME="I2782"></A><A NAME="I2783"></A></div>
<div class="paranum"><a name="p2.a">2.a/3</a></div>
<div class="Annotations"><B>Aspect Description for&nbsp;</B><B>Constant_Indexing: 
</B>Defines function(s) to implement user-defined <SPAN Class="swiss"><A HREF="AA-4-1-1.html#S0096">indexed_component</A></SPAN>s.</div>
<div class="paranum"><a name="p3">3/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0428-1.TXT">AI12-0428-1</A></I>} 
Variable_Indexing</div><div class="WideHanging-Body"><br clear="left">
This aspect shall be specified by a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
that denotes one or more functions declared immediately within the same 
declaration list in which <I>T</I>, or the declaration completed by <I>T</I>, 
is declared. All such functions shall have at least two parameters, the 
first of which is of type <I>T</I> or <I>T</I>'Class, or is an access 
parameter with designated type <I>T</I> or <I>T</I>'Class. All such functions 
shall have a return type that is a reference type (see <A HREF="AA-4-1-5.html">4.1.5</A>), 
whose reference discriminant is of an access-to-variable type.<A NAME="I2784"></A><A NAME="I2785"></A> 
</div>
<div class="paranum"><a name="p3.a">3.a/3</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>We require these functions to 
return a reference type so that the object returned from the function 
can act like a variable. We need no similar rule for Constant_Indexing, 
since all functions return constant objects.&nbsp;</div>
<div class="paranum"><a name="p3.b">3.b/3</a></div>
<div class="Annotations"><B>Aspect Description for&nbsp;</B><B>Variable_Indexing: 
</B>Defines function(s) to implement user-defined <SPAN Class="swiss"><A HREF="AA-4-1-1.html#S0096">indexed_component</A></SPAN>s.</div>
<div class="paranum"><a name="p3.c">3.c/6</a></div>
<div class="Annotations"><span class="insert6"><B>Reason:&nbsp;</B></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI22s/AI22-0002-1.TXT">AI22-0002-1</A></I>} 
<span class="insert6"></span>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI22s/AI22-0005-1.TXT">AI22-0005-1</A></I>} 
<span class="insert6">For a function that has a parameter of <I>T</I> 
or <B>access</B> <I>T</I>, a blanket rule in <A HREF="AA-13-1-1.html">13.1.1</A> 
requires the function to be a primitive operation of <I>T</I>, the wording 
about the same declaration list is redundant in that case. That <A HREF="AA-13-1-1.html">13.1.1</A> 
rule does <I>not</I> apply to functions that have parameters of <I>T</I>'Class 
or <B>access</B> <I>T</I>'Class (which is good, as those can never be 
primitive); the wording about the declaration list is necessary in that 
case.</span>&nbsp;</div>
<div class="paranum"><a name="p4">4/4</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0104-1.TXT">AI12-0104-1</A></I>} 
These aspects are inherited by descendants of <I>T</I> (including the 
class-wide type <I>T</I>'Class).</div>
<div class="paranum"><a name="p4.a">4.a/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>Indexing can be provided 
for multiple index types by overloading routines with different parameter 
profiles. For instance, the map containers provide indexing on both cursors 
and keys by providing pairs of overloaded routines to the Constant_Indexing 
and Variable_Indexing aspects.&nbsp;</div>
<div class="paranum"><a name="p5">5/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0292-1.TXT">AI05-0292-1</A></I>} 
An <I>indexable container type</I> is (a view of) a tagged type with 
at least one of the aspects Constant_Indexing or Variable_Indexing specified.<A NAME="I2786"></A> 
An <I>indexable container object</I> is an object of an indexable container 
type.<A NAME="I2787"></A> [A <SPAN Class="swiss"><A HREF="AA-4-1-6.html#S0105">generalized_indexing</A></SPAN> 
is a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
that denotes the result of calling a function named by a Constant_Indexing 
or Variable_Indexing aspect.]</div>
<div class="paranum"><a name="p5.a">5.a/5</a></div>
<div class="Annotations"><B>Term entry:&nbsp;</B><B>indexable container type</B> 
&mdash; type that has user-defined behavior for indexing, via the Constant_Indexing 
or Variable_Indexing aspects</div>
<div class="paranum"><a name="p5.1">5.1/4</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0138-1.TXT">AI12-0138-1</A></I>} 
The Constant_Indexing and Variable_Indexing aspects are nonoverridable 
(see <A HREF="AA-13-1-1.html">13.1.1</A>). <A NAME="I2788"></A><A NAME="I2789"></A></div>
<div class="paranum"><a name="p5.b">5.b/5</a></div>
<div class="Annotations"><B>Reason:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0160-1.TXT">AI12-0160-1</A></I>} 
This (and the following Legality Rules) ensures that all descendants 
of an indexable container type have aspects with the same properties. 
This prevents generic contract problems with formal derived types.</div>
<div class="paranum"><a name="p5.c">5.c/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0104-1.TXT">AI12-0104-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0138-1.TXT">AI12-0138-1</A></I>} 
A nonoverridable aspect allows the replacement of the implementation 
of an indexing function and the addition of a new indexing function for 
a derived type, but not the removal of an indexing function. This is 
necessary so that indexing can be used on objects of T'Class. So long 
as the tag of O is that of its nominal subtype, we do not want T'Class(O)(I) 
to mean something different than O(I). Thus we cannot allow a change 
in the function identified. As T'Class(O)(I) expands into a dispatching 
call, we need to ensure that there is a body for each such function -- 
but it is OK for that body to be changed from the original body (that's 
just normal dispatching).&nbsp;</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p6">6/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0160-1.TXT">AI12-0160-1</A></I>} 
If an ancestor of a type <I>T</I> is an indexable container type, then 
any explicit specification of the Constant_Indexing or Variable_Indexing 
aspects shall be confirming; that is, the specified <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
shall match the inherited aspect (see <A HREF="AA-13-1-1.html">13.1.1</A>). 
</div>
<div class="Normal"><SPAN STYLE="font-size: 80%"><I>Paragraphs 7 through 
8 were deleted.</I></SPAN>&nbsp;</div>
<div class="paranum"><a name="p9">9/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0160-1.TXT">AI12-0160-1</A></I>} 
<A NAME="I2790"></A>In addition to the places where Legality Rules normally 
apply (see <A HREF="AA-12-3.html">12.3</A>), this rule applies also in 
the private part of an instance of a generic unit.</div>
<div class="paranum"><a name="p9.1">9.1/5</a></div>
<div class="Normal">&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0204-1.TXT">AI12-0204-1</A></I>} 
A <SPAN Class="swiss"><A HREF="AA-4-1-6.html#S0105">generalized_indexing</A></SPAN> 
is illegal if the equivalent prefixed view (see below) is illegal.&nbsp;</div>

<H4 Class="centered">Syntax</H4>
<div class="paranum"><a name="p10">10/3</a></div>
<div class="Indented1">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0292-1.TXT">AI05-0292-1</A></I>} 
<SPAN Class="swiss">generalized_indexing</SPAN><A NAME="I2791"></A><A NAME="S0105"></A><SPAN Class="swiss">&nbsp;::=&nbsp;</SPAN><I>indexable_container_object_</I><A NAME="I2792"></A><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN>&nbsp;<A NAME="I2793"></A><SPAN Class="swiss"><A HREF="AA-6-4.html#S0219">actual_parameter_part</A></SPAN></div>

<H4 Class="centered">Name Resolution Rules</H4>
<div class="paranum"><a name="p11">11/3</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0292-1.TXT">AI05-0292-1</A></I>} 
The expected type for the <I>indexable_container_object_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-4-1-6.html#S0105">generalized_indexing</A></SPAN> 
is any indexable container type.<A NAME="I2794"></A></div>
<div class="paranum"><a name="p11.a">11.a/5</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>A <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
can be an <SPAN Class="swiss"><A HREF="AA-4-1.html#S0095">implicit_dereference</A></SPAN> 
(see <A HREF="AA-4-1.html">4.1</A>), so an access-to-<I>indexable_container_object</I> 
can be the prefix (English meaning!) of a <SPAN Class="swiss"><A HREF="AA-4-1-6.html#S0105">generalized_indexing</A></SPAN>. 
</div>
<div class="paranum"><a name="p12">12/3</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0292-1.TXT">AI05-0292-1</A></I>} 
If the Constant_Indexing aspect is specified for the type of the <I>indexable_container_object_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of a <SPAN Class="swiss"><A HREF="AA-4-1-6.html#S0105">generalized_indexing</A></SPAN>, 
then the <SPAN Class="swiss"><A HREF="AA-4-1-6.html#S0105">generalized_indexing</A></SPAN> 
is interpreted as a <I>constant indexing</I> under the following circumstances:<A NAME="I2795"></A><A NAME="I2796"></A></div>
<div class="paranum"><a name="p13">13/3</a></div>
<div class="Bulleted">when the Variable_Indexing aspect is not specified 
for the type of the <I>indexable_container_object_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN>;</div>
<div class="paranum"><a name="p14">14/3</a></div>
<div class="Bulleted">when the <I>indexable_container_object_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
denotes a constant;</div>
<div class="paranum"><a name="p15">15/3</a></div>
<div class="Bulleted">when the <SPAN Class="swiss"><A HREF="AA-4-1-6.html#S0105">generalized_indexing</A></SPAN> 
is used within a <SPAN Class="swiss"><A HREF="AA-4-4.html#S0141">primary</A></SPAN> 
where a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
denoting a constant is permitted.</div>
<div class="paranum"><a name="p15.a">15.a/3</a></div>
<div class="Annotations"><B>Ramification:&nbsp;</B>This means it is not interpreted 
as a constant indexing for the <I>variable_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
in the LHS of an assignment (not inside a <SPAN Class="swiss"><A HREF="AA-4-4.html#S0141">primary</A></SPAN>), 
nor for the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
used for an <B>out</B> or <B>in out</B> parameter (not allowed to be 
a constant), nor for the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
in an object renaming (not inside a primary), unless there is no Variable_Indexing 
aspect defined.&nbsp;</div>
<div class="paranum"><a name="p16">16/3</a></div>
<div class="Normal">Otherwise, the <SPAN Class="swiss"><A HREF="AA-4-1-6.html#S0105">generalized_indexing</A></SPAN> 
is interpreted as a <I>variable indexing</I>.<A NAME="I2797"></A><A NAME="I2798"></A></div>
<div class="paranum"><a name="p17">17/3</a></div>
<div class="Normal">When a <SPAN Class="swiss"><A HREF="AA-4-1-6.html#S0105">generalized_indexing</A></SPAN> 
is interpreted as a constant (or variable) indexing, it is equivalent 
to a call on a prefixed view of one of the functions named by the Constant_Indexing 
(or Variable_Indexing) aspect of the type of the <I>indexable_container_object_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
with the given <SPAN Class="swiss"><A HREF="AA-6-4.html#S0219">actual_parameter_part</A></SPAN>, 
and with the <I>indexable_container_object_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
as the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN> 
of the prefixed view.</div>
<div class="paranum"><a name="p17.a">17.a/3</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Ramification: 
</B>In other words, the <SPAN Class="swiss"><A HREF="AA-4-1-6.html#S0105">generalized_indexing</A></SPAN> 
is equivalent to:</div>
<div class="paranum"><a name="p17.b">17.b/3</a></div>
<div class="SmallExamples"><I>indexable_container_object_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0093">prefix</A></SPAN>.Indexing&nbsp;<SPAN Class="swiss"><A HREF="AA-6-4.html#S0219">actual_parameter_part</A></SPAN></div>
<div class="paranum"><a name="p17.c">17.c/4</a></div>
<div class="Annotations" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
where Indexing is the <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
specified for the Constant_Indexing or Variable_Indexing aspect. This 
equivalence is then resolved in the normal way; the aspect specifies 
a <SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN>, it 
does not denote declarations.&nbsp;</div>
<div class="paranum"><a name="p18">18/4</a></div>
<div class="Notes">NOTE&nbsp;&nbsp;&nbsp;{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0104-1.TXT">AI12-0104-1</A></I>} 
The Constant_Indexing and Variable_Indexing aspects cannot be redefined 
when inherited for a derived type, but the functions that they denote 
can be modified by overriding or overloading.&nbsp;</div>

<H4 Class="centered">Examples</H4>
<div class="paranum"><a name="p19">19/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0429-1.TXT">AI12-0429-1</A></I>} 
<I>Examples of the specification and use of generalized indexing:</I></div>
<div class="paranum"><a name="p20">20/3</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0268-1.TXT">AI05-0268-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0292-1.TXT">AI05-0292-1</A></I>} 
<B>type</B>&nbsp;Indexed_Barrel&nbsp;<B>is&nbsp;tagged</B>&nbsp;...<BR>
&nbsp;&nbsp;<B>with</B>&nbsp;Variable_Indexing&nbsp;=&gt;&nbsp;Find;<BR>
&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Indexed_Barrel&nbsp;is&nbsp;an&nbsp;indexable&nbsp;container&nbsp;type,</I></SPAN><BR>
&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Find&nbsp;is&nbsp;the&nbsp;generalized&nbsp;indexing&nbsp;operation.</I></SPAN></div>
<div class="paranum"><a name="p21">21/3</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0268-1.TXT">AI05-0268-1</A></I>} 
<B>function</B>&nbsp;Find&nbsp;(B&nbsp;:&nbsp;<B>aliased&nbsp;in&nbsp;out</B>&nbsp;Indexed_Barrel;&nbsp;Key&nbsp;:&nbsp;String)<BR>
&nbsp;&nbsp;&nbsp;<B>return</B>&nbsp;Ref_Element;<BR>
&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Return&nbsp;a&nbsp;reference&nbsp;to&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;barrel&nbsp;(see&nbsp;<A HREF="AA-4-1-5.html">4.1.5</A>).</I></SPAN></div>
<div class="paranum"><a name="p22">22/3</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0268-1.TXT">AI05-0268-1</A></I>} 
IB:&nbsp;<B>aliased</B>&nbsp;Indexed_Barrel;</div>
<div class="paranum"><a name="p23">23/3</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0268-1.TXT">AI05-0268-1</A></I>} 
--&nbsp;<SPAN Class="roman"><I>All&nbsp;of&nbsp;the&nbsp;following&nbsp;calls&nbsp;are&nbsp;then&nbsp;equivalent:</I></SPAN><BR>
Find&nbsp;(IB,&quot;pear&quot;).Data.<B>all</B>&nbsp;:=&nbsp;Element'(...);&nbsp;--&nbsp;<SPAN Class="roman"><I>Traditional&nbsp;call</I></SPAN><BR>
IB.Find&nbsp;(&quot;pear&quot;).Data.<B>all</B>&nbsp;:=&nbsp;Element'(...);&nbsp;--&nbsp;<SPAN Class="roman"><I>Call&nbsp;of&nbsp;prefixed&nbsp;view</I></SPAN><BR>
IB.Find&nbsp;(&quot;pear&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=&nbsp;Element'(...);&nbsp;--&nbsp;<SPAN Class="roman"><I>Implicit&nbsp;dereference&nbsp;(see&nbsp;<A HREF="AA-4-1-5.html">4.1.5</A>)</I></SPAN><BR>
IB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&quot;pear&quot;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:=&nbsp;Element'(...);&nbsp;--&nbsp;<SPAN Class="roman"><I>Implicit&nbsp;indexing&nbsp;and&nbsp;dereference</I></SPAN><BR>
IB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&quot;pear&quot;).Data.<B>all</B>&nbsp;:=&nbsp;Element'(...);&nbsp;--&nbsp;<SPAN Class="roman"><I>Implicit&nbsp;indexing&nbsp;only</I></SPAN></div>

<H4 Class="centered">Extensions to Ada 2005</H4>
<div class="paranum"><a name="p23.a">23.a/3</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI05s/AI05-0139-2.TXT">AI05-0139-2</A></I>} 
<A NAME="I2799"></A>Aspects Constant_Indexing and Variable_Indexing, 
and the <SPAN Class="swiss"><A HREF="AA-4-1-6.html#S0105">generalized_indexing</A></SPAN> 
syntax are new.&nbsp;</div>

<H4 Class="centered">Incompatibilities With Ada 2012</H4>
<div class="paranum"><a name="p23.b">23.b/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0160-1.TXT">AI12-0160-1</A></I>} 
<A NAME="I2800"></A><B>Correction:</B> Prevented a derived type from 
specifying Constant_Indexing if the ancestor specified Variable_Indexing 
(and vice versa). This is necessary to preserve the intent that for an 
object Obj whose tag is that of its nominal subtype, T'Class(Obj)(I) 
always has the same meaning as Obj(I). Situations like this should be 
rare in practice; most types will either define both aspects or neither.</div>
<div class="paranum"><a name="p23.c">23.c/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0204-1.TXT">AI12-0204-1</A></I>} 
<A NAME="I2801"></A><B>Correction:</B> Added a rule that a generalized 
indexing is illegal if the equivalent prefixed view would be illegal. 
If the prefixed view would be illegal for any reason, Ada 2012 would 
have allowed the generalized indexing while Ada 2022 does not. This violated 
the principle that a generalized indexing and the equivalent prefixed 
view have the same semantics; practically, the code may not have worked 
anyway if a compiler implemented generalized indexing by code expansion 
into the canonical form. Thus, such code wasn't practically portable. 
</div>

<H4 Class="centered">Wording Changes from Ada 2012</H4>
<div class="paranum"><a name="p23.d">23.d/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0104-1.TXT">AI12-0104-1</A></I>} 
<B>Corrigendum:</B> Converted confusing and unnecessary normative wording 
about &quot;overriding an aspect&quot; into a note.</div>
<div class="paranum"><a name="p23.e">23.e/4</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0138-1.TXT">AI12-0138-1</A></I>} 
<B>Corrigendum:</B> Defined Constant_Indexing and Variable_Indexing to 
be nonoveridable. This is merely a new description for Legality Rules 
which already applied to these aspects.</div>
<div class="paranum"><a name="p23.f">23.f/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0428-1.TXT">AI12-0428-1</A></I>} 
<B>Correction:</B> Allowed the completion of a private type to use declarations 
from either the visible part or the private part.&nbsp;</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-1-5.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-2.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
