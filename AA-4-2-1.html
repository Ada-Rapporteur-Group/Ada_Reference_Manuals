<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
    <TITLE>User-Defined Literals</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <META NAME="Author" CONTENT="JTC1/SC22/WG9/ARG, by Randall Brukardt, ARG Editor">
    <META NAME="GENERATOR" CONTENT="Arm_Form.Exe, Ada Reference Manual generator">
    <STYLE type="text/css">
    H4.centered {text-align: center}
    SPAN.swiss {font-family: Arial, Helvetica, sans-serif; font-size: 92%}
    SPAN.roman {font-family: "Times New Roman", Times, serif}
    DIV.paranum {float: left; font-family: Arial, Helvetica, sans-serif; font-size: 64%; width: 2.8em; margin-left: -0.4em; margin-right: -3.0em; margin-top: 0.2em}
    TT {font-family: "Courier New", monospace}
    DT {display: compact}
    SPAN.insert6 {text-decoration: underline; color: rgb(0,51,204) }
    SPAN.delete6 {text-decoration: line-through; color: rgb(0,51,204) }
    A.Bar:link {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    A.Bar:visited {font-family: Arial, Helvetica, sans-serif; font-style: normal; text-decoration: none; color: rgb(204,204,51)}
    DIV.Normal {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-bottom: 0.6em}
    DIV.Annotations {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 6.8em; margin-bottom: 0.6em}
    DIV.Examples {font-family: "Courier New", monospace; font-size: 90%; line-height: 122%; margin-left: 4.0em; margin-bottom: 0.6em}
    DIV.SmallExamples {font-family: "Courier New", monospace; font-size: 72%; line-height: 122%; margin-left:  10.2em; margin-bottom: 0.6em}
    DIV.SmallBulleted-NoPrefix {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 9.3em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em}
    DIV.SmallBulleted {font-family: "Times New Roman", Times, serif; font-size: 80%; line-height: 122%; margin-left: 9.3em; margin-right: 2.5em; margin-top: 0em; margin-bottom: 0.5em; display: list-item; list-style-type: disc}
    DIV.WideHanging-Body {font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 7.8em; margin-top: 0em; margin-bottom: 0.6em}
    DIV.WideHanging-Term {float: left; font-family: "Times New Roman", Times, serif; line-height: 122%; margin-left: 1.8em; margin-top: 0em; margin-bottom: 0em}
    </STYLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFF0" LINK="#000080" VLINK="#330033" ALINK="#0000FF">
<DIV><SPAN Style="font-size:200%; color: rgb(0,51,153)"><B>Annotated</B></SPAN><SPAN Style="font-size:200%; color: rgb(0,0,102)"><B>&nbsp;Ada Reference Manual</B> (Ada 202y Draft 1)</SPAN> &mdash; <A HREF="AA-TTL.html"><B>Legal Information</B></A></DIV>
<div style="margin-top: 0.6em; margin-bottom: 0.0em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<HR>
<H1>4.2.1 User-Defined Literals</H1>
<div class="paranum"><a name="p1">1/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0249-1.TXT">AI12-0249-1</A></I>} 
Using one or more of the aspects defined below, a type may be specified 
to allow the use of one or more kinds of literals as values of the type. 
</div>

<H4 Class="centered">Static Semantics</H4>
<div class="paranum"><a name="p2">2/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0249-1.TXT">AI12-0249-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
The following type-related operational aspects (collectively known as 
<I>user-defined literal aspects</I>)<A NAME="I2823"></A> <A NAME="I2824"></A>may 
be specified for a type <I>T</I>:</div>
<div class="paranum"><a name="p3">3/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0249-1.TXT">AI12-0249-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0373-1.TXT">AI12-0373-1</A></I>} 
Integer_Literal</div><div class="WideHanging-Body"><br clear="left">
This aspect is specified by a <I>function_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
that statically denotes a function with a result type of <I>T</I> and 
one <B>in</B> parameter that is of type String and is not explicitly 
aliased.<A NAME="I2825"></A><A NAME="I2826"></A></div>
<div class="paranum"><a name="p3.a">3.a/5</a></div>
<div class="Annotations"><B>Aspect Description for&nbsp;</B><B>Integer_Literal: 
</B>Defines a function to implement user-defined integer literals.</div>
<div class="paranum"><a name="p4">4/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0249-1.TXT">AI12-0249-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0373-1.TXT">AI12-0373-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0394-1.TXT">AI12-0394-1</A></I>} 
Real_Literal</div><div class="WideHanging-Body"><br clear="left">
This aspect is specified by a <I>function_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
that statically denotes a function with a result type of <I>T</I> and 
one <B>in</B> parameter that is of type String and is not explicitly 
aliased, and optionally a second function [(overloading the first) ]with 
a result type of <I>T</I> and two <B>in</B> parameters of type String 
that are not explicitly aliased.<A NAME="I2827"></A><A NAME="I2828"></A></div>
<div class="paranum"><a name="p4.a">4.a/5</a></div>
<div class="Annotations"><B>Aspect Description for&nbsp;</B><B>Real_Literal: 
</B>Defines a function or functions to implement user-defined real literals.</div>
<div class="paranum"><a name="p5">5/5</a></div>
<div class="WideHanging-Term">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0295-1.TXT">AI12-0295-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0373-1.TXT">AI12-0373-1</A></I>} 
String_Literal</div><div class="WideHanging-Body"><br clear="left">
This aspect is specified by a <I>function_</I><SPAN Class="swiss"><A HREF="AA-4-1.html#S0091">name</A></SPAN> 
that statically denotes a function with a result type of <I>T</I> and 
one <B>in</B> parameter that is of type Wide_Wide_String and is not explicitly 
aliased.<A NAME="I2829"></A><A NAME="I2830"></A></div>
<div class="paranum"><a name="p5.a">5.a/5</a></div>
<div class="Annotations"><B>Aspect Description for&nbsp;</B><B>String_Literal: 
</B>Defines a function to implement user-defined string literals.</div>
<div class="paranum"><a name="p5.b">5.b/5</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Ramification: 
</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
The following example is legal because the resolution of an <SPAN Class="swiss"><A HREF="AA-13-1-1.html#S0348">aspect_definition</A></SPAN> 
for an aspect that is defined to be a subprogram is based on the profile 
required for that aspect (see <A HREF="AA-13-1-1.html">13.1.1</A>):&nbsp;</div>
<div class="paranum"><a name="p5.c">5.c/5</a></div>
<div class="SmallExamples"><B>package</B>&nbsp;Pkg1&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T&nbsp;<B>is&nbsp;record</B>&nbsp;X,&nbsp;Y&nbsp;:&nbsp;Integer;&nbsp;<B>end&nbsp;record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Integer_Literal&nbsp;=&gt;&nbsp;Int_Lit;<BR>
&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;Int_Lit&nbsp;(X,&nbsp;Y&nbsp;:&nbsp;T)&nbsp;<B>return</B>&nbsp;Duration;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;<SPAN Class="roman"><I>Wrong&nbsp;profile.</I></SPAN><BR>
&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;Int_Lit&nbsp;(Lit_Image&nbsp;:&nbsp;String)&nbsp;<B>return</B>&nbsp;T;&nbsp;--&nbsp;<SPAN Class="roman"><I>Right&nbsp;profile.</I></SPAN><BR>
<B>end</B>&nbsp;Pkg1;</div>
<div class="paranum"><a name="p6">6/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0419-1.TXT">AI12-0419-1</A></I>} 
User-defined literal aspects are nonoverridable (see <A HREF="AA-13-1-1.html">13.1.1</A>). 
<A NAME="I2831"></A><A NAME="I2832"></A><A NAME="I2833"></A></div>
<div class="paranum"><a name="p6.a">6.a/5</a></div>
<div class="Annotations" style="margin-bottom: 0.4em"><B>Discussion: 
</B>This means that in this example</div>
<div class="paranum"><a name="p6.b">6.b/5</a></div>
<div class="SmallExamples"><B>package</B>&nbsp;Pkg2&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;<B>type&nbsp;T1&nbsp;is&nbsp;record</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X,&nbsp;Y&nbsp;:&nbsp;Integer;<BR>
&nbsp;&nbsp;&nbsp;<B>end&nbsp;record&nbsp;with</B>&nbsp;Integer_Literal&nbsp;=&gt;&nbsp;I_L;</div>
<div class="paranum"><a name="p6.c">6.c/5</a></div>
<div class="SmallExamples">&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;I_L&nbsp;(S&nbsp;:&nbsp;String)&nbsp;<B>return</B>&nbsp;T1&nbsp;<B>is</B>&nbsp;((0,&nbsp;0));</div>
<div class="paranum"><a name="p6.d">6.d/5</a></div>
<div class="SmallExamples">&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;T2&nbsp;<B>is&nbsp;new</B>&nbsp;T1;<BR>
&nbsp;&nbsp;&nbsp;<B>function</B>&nbsp;I_L&nbsp;(S&nbsp;:&nbsp;String)&nbsp;<B>return</B>&nbsp;T2&nbsp;is&nbsp;((1,&nbsp;1));<BR>
&nbsp;&nbsp;&nbsp;X&nbsp;:&nbsp;T2&nbsp;:=&nbsp;123;<BR>
<B>end</B>&nbsp;Pkg2;</div>
<div class="paranum"><a name="p6.e">6.e/5</a></div>
<div class="Annotations" style="margin-bottom: 0.9em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0005-1.TXT">AI12-0005-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0419-1.TXT">AI12-0419-1</A></I>} 
the initial value of Pkg2.X is (1,1), not (0,0).&nbsp;</div>
<div class="paranum"><a name="p7">7/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0427-1.TXT">AI12-0427-1</A></I>} 
When a numeric literal is interpreted as a value of a non-numeric type 
<I>T</I> or a <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN> 
is interpreted as a value of a type <I>T</I> that is not a string type 
(see <A HREF="AA-4-2.html">4.2</A>), it is equivalent to a call to the 
subprogram denoted by the corresponding aspect of <I>T</I>: the Integer_Literal 
aspect for an integer literal, the Real_Literal aspect for a real literal, 
and the String_Literal aspect for a <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN>. 
The actual parameter of this notional call is a <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN> 
representing a sequence of characters that is the same as the sequence 
of characters in the original numeric literal, or the sequence represented 
by the original string literal.</div>
<div class="paranum"><a name="p7.a">7.a/5</a></div>
<div class="Annotations"><B>Discussion:&nbsp;</B>This equivalence defines, 
for example, the nominal type, the nominal subtype, and the accessibility 
level of a user-defined literal. It also has the consequence that a user-defined 
literal shall not be of an abstract type (because that would be equivalent 
to a nondispatching call to an abstract function). This equivalence also 
defines the Dynamic Semantics of evaluating a user-defined literal.</div>
<div class="paranum"><a name="p7.b">7.b/5</a></div>
<div class="Annotations">The (sub)type of the actual parameter to this 
call is determined by the profile of the appropriate aspect, and the 
bounds of the <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN> 
are defined by the usual rules for the bounds of a <SPAN Class="swiss"><A HREF="AA-2-6.html#S0016">string_literal</A></SPAN>. 
</div>
<div class="paranum"><a name="p8">8/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
Such a literal is said to be a <I>user-defined literal</I>.<A NAME="I2834"></A></div>
<div class="paranum"><a name="p9">9/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0394-1.TXT">AI12-0394-1</A></I>} 
When a named number that denotes a value of type <I>universal_integer</I> 
is interpreted as a value of a non-numeric type <I>T</I>, it is equivalent 
to a call to the function denoted by the Integer_Literal aspect of <I>T</I>. 
The actual parameter of this notional call is a String having a textual 
representation of a decimal integer literal optionally preceded by a 
minus sign, representing the same value as the named number.</div>
<div class="paranum"><a name="p10">10/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0394-1.TXT">AI12-0394-1</A></I>} 
When a named number that denotes a value of type <I>universal_real</I> 
is interpreted as a value of a non-numeric type <I>T</I>, it is equivalent 
to a call to the two-parameter function denoted by the Real_Literal aspect 
of <I>T</I>, if any. The actual parameters of this notional call are 
each a String with the textual representation of a decimal integer literal, 
with the first optionally preceded by a minus sign, where the first String 
represents the same value as the numerator, and the second the same value 
as the denominator, of the named number when represented as a rational 
number in lowest terms, with a positive denominator.</div>

<H4 Class="centered">Legality Rules</H4>
<div class="paranum"><a name="p11">11/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0249-1.TXT">AI12-0249-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0295-1.TXT">AI12-0295-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0325-1.TXT">AI12-0325-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
The Integer_Literal or Real_Literal aspect shall not be specified for 
a type <I>T</I> if the full view of <I>T</I> is a numeric type. The String_Literal 
aspect shall not be specified for a type <I>T</I> if the full view of 
<I>T</I> is a string type.</div>
<div class="paranum"><a name="p12">12/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
For a nonabstract type, the function directly specified for a user-defined 
literal aspect shall not be abstract.</div>
<div class="paranum"><a name="p13">13/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
For a tagged type with a partial view, a user-defined literal aspect 
shall not be directly specified on the full type.</div>
<div class="paranum"><a name="p14">14/6</a></div>
<div class="Normal"><SPAN STYLE="font-size: 80%"><I>This paragraph was 
deleted.</I></SPAN>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0394-1.TXT">AI12-0394-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI22s/AI22-0003-1.TXT">AI22-0003-1</A></I>} 
<span class="delete6">If a nonabstract tagged type inherits any user-defined 
literal aspect, then each inherited aspect shall be directly specified 
as a nonabstract function for the type unless the inherited aspect denotes 
a nonabstract function, or functions, and the type is a null extension.</span></div>
<div class="paranum"><a name="p15">15/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0394-1.TXT">AI12-0394-1</A></I>} 
If a named number that denotes a value of type <I>universal_integer</I> 
is interpreted as a value of a non-numeric type <I>T</I>, <I>T</I> shall 
have an Integer_Literal aspect. If a named number that denotes a value 
of type <I>universal_real</I> is interpreted as a value of a non-numeric 
type <I>T</I>, <I>T</I> shall have a Real_Literal aspect, and the aspect 
shall denote a function that has two <B>in</B> parameters, both of type 
String, with result of type <I>T</I>.</div>
<div class="paranum"><a name="p16">16/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0249-1.TXT">AI12-0249-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
In addition to the places where Legality Rules normally apply (see <A HREF="AA-12-3.html">12.3</A>), 
these rules also apply in the private part of an instance of a generic 
unit.<A NAME="I2835"></A>&nbsp;</div>

<H4 Class="centered">Bounded (Run-Time) Errors</H4>
<div class="paranum"><a name="p17">17/5</a></div>
<div class="Normal">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0249-1.TXT">AI12-0249-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0325-1.TXT">AI12-0325-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0394-1.TXT">AI12-0394-1</A></I>} 
<A NAME="I2836"></A>It is a bounded error if the evaluation of a literal 
or named number that has an expected type with a specified user-defined 
literal aspect propagates an exception. Either Program_Error or the exception 
propagated by the evaluation is raised at the point of use of the value 
of the literal or named number. If it is recognized prior to run time 
that evaluation of such a literal or named number will inevitably (if 
executed) result in such a bounded error, then this may be reported as 
an error prior to run time.<A NAME="I2837"></A></div>
<div class="paranum"><a name="p17.a">17.a/5</a></div>
<div class="Annotations"><B>Implementation Note:&nbsp;</B>{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0249-1.TXT">AI12-0249-1</A></I>} 
As always, an implementation may apply &quot;as-if&quot; optimizations 
(those that result in the same external effects in the absence of erroneous 
execution) to the function calls associated with user-defined literals. 
In particular, if the function associated with a user-defined literal 
aspect has a Global aspect that indicates no references to global variables, 
then a number of optimizations are available to the implementation:&nbsp;</div>
<div class="paranum"><a name="p17.b">17.b/5</a></div>
<div class="SmallBulleted">The implementation can evaluate a user-defined 
literal function at compile-time if it has access to the body of the 
function (for example, if it is inlined), and that body doesn't reference 
anything evaluated at runtime. If the compile-time evaluation results 
in an exception, this bounded error allows the compilation unit to be 
rejected.</div>
<div class="paranum"><a name="p17.c">17.c/5</a></div>
<div class="SmallBulleted">Implementations can use existing permissions 
(see <A HREF="AA-6-1-2.html">6.1.2</A>) to avoid evaluating the function 
associated with a user-defined literal more than once for a particular 
literal value. This evaluation can be &quot;hoisted&quot; (done once 
per compilation unit during the elaboration of the unit) if the compiler 
can prove that the function doesn't depend on any constants or locals 
with a runtime value not yet elaborated.</div>
<div class="paranum"><a name="p17.d">17.d/5</a></div>
<div class="SmallBulleted">If the literal value is not needed by the 
execution of the program, the function call can be omitted even if it 
might have side-effects (again, see <A HREF="AA-6-1-2.html">6.1.2</A>). 
</div>

<H4 Class="centered">Examples</H4>
<div class="paranum"><a name="p18">18/5</a></div>
<div class="Normal" style="margin-bottom: 0.4em">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0429-1.TXT">AI12-0429-1</A></I>} 
<I>Examples of the specification and use of user-defined literals:</I></div>
<div class="paranum"><a name="p19">19/5</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0312-1.TXT">AI12-0312-1</A></I>} 
<B>subtype</B>&nbsp;Roman_Character&nbsp;<B>is</B>&nbsp;Wide_Wide_Character<BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Static_Predicate&nbsp;=&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Roman_Character&nbsp;<B>in</B>&nbsp;'I'&nbsp;|&nbsp;'V'&nbsp;|&nbsp;'X'&nbsp;|&nbsp;'L'&nbsp;|&nbsp;'C'&nbsp;|&nbsp;'D'&nbsp;|&nbsp;'M';</div>
<div class="paranum"><a name="p20">20/5</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0312-1.TXT">AI12-0312-1</A></I>} 
Max_Roman_Number&nbsp;:&nbsp;<B>constant</B>&nbsp;:=&nbsp;3_999;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;MMMCMXCIX</I></SPAN></div>
<div class="paranum"><a name="p21">21/5</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0312-1.TXT">AI12-0312-1</A></I>} 
<B>type</B>&nbsp;Roman_Number&nbsp;<B>is</B>&nbsp;<B>range</B>&nbsp;1&nbsp;..&nbsp;Max_Roman_Number<BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;String_Literal&nbsp;=&gt;&nbsp;To_Roman_Number;</div>
<div class="paranum"><a name="p22">22/5</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0312-1.TXT">AI12-0312-1</A></I>} 
<B>function</B>&nbsp;To_Roman_Number&nbsp;(S&nbsp;:&nbsp;Wide_Wide_String)&nbsp;<B>return</B>&nbsp;Roman_Number<BR>
&nbsp;&nbsp;&nbsp;<B>with</B>&nbsp;Pre&nbsp;=&gt;&nbsp;S'Length&nbsp;&gt;&nbsp;0&nbsp;<B>and&nbsp;then</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<B>for&nbsp;all</B>&nbsp;Char&nbsp;<B>of</B>&nbsp;S&nbsp;=&gt;&nbsp;Char&nbsp;<B>in</B>&nbsp;Roman_Character);</div>
<div class="paranum"><a name="p23">23/5</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0312-1.TXT">AI12-0312-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0386-1.TXT">AI12-0386-1</A></I>} 
<B>function</B>&nbsp;To_Roman_Number&nbsp;(S&nbsp;:&nbsp;Wide_Wide_String)&nbsp;<B>return</B>&nbsp;Roman_Number&nbsp;<B>is</B><BR>
&nbsp;&nbsp;&nbsp;(<B>declare</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;R&nbsp;:&nbsp;<B>constant&nbsp;array</B>&nbsp;(Integer&nbsp;<B>range</B>&nbsp;&lt;&gt;)&nbsp;<B>of</B>&nbsp;Roman_Number&nbsp;:=<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<B>for</B>&nbsp;D&nbsp;<B>in</B>&nbsp;S'Range&nbsp;=&gt;&nbsp;Roman_Digit'Enum_Rep<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Roman_Digit'Wide_Wide_Value&nbsp;('''&nbsp;&amp;&nbsp;S(D)&nbsp;&amp;&nbsp;''')));<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--<SPAN Class="roman"><I>&nbsp;See&nbsp;<A HREF="AA-3-5-2.html">3.5.2</A>&nbsp;and&nbsp;<A HREF="AA-13-4.html">13.4</A></I></SPAN><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>begin</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<B>for</B>&nbsp;I&nbsp;<B>in</B>&nbsp;R'Range&nbsp;=&gt;<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<B>if</B>&nbsp;I&nbsp;&lt;&nbsp;R'Last&nbsp;<B>and&nbsp;then</B>&nbsp;R(I)&nbsp;&lt;&nbsp;R(I&nbsp;+&nbsp;1)&nbsp;<B>then</B>&nbsp;-1&nbsp;<B>else</B>&nbsp;1)&nbsp;*&nbsp;R(I)]<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Reduce(&quot;+&quot;,&nbsp;0)<BR>
&nbsp;&nbsp;&nbsp;);</div>
<div class="paranum"><a name="p24">24/5</a></div>
<div class="Examples">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0312-1.TXT">AI12-0312-1</A></I>} 
X&nbsp;:&nbsp;Roman_Number&nbsp;:=&nbsp;&quot;III&quot;&nbsp;*&nbsp;&quot;IV&quot;&nbsp;*&nbsp;&quot;XII&quot;;&nbsp;--<SPAN Class="roman"><I>&nbsp;144&nbsp;(that&nbsp;is,&nbsp;CXLIV)</I></SPAN></div>

<H4 Class="centered">Extensions to Ada 2012</H4>
<div class="paranum"><a name="p24.a">24.a/5</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0249-1.TXT">AI12-0249-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0295-1.TXT">AI12-0295-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0325-1.TXT">AI12-0325-1</A></I>} 
{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI12s/AI12-0342-1.TXT">AI12-0342-1</A></I>} 
<A NAME="I2838"></A>The user-defined literal aspects Integer_Literal, 
Real_Literal, and String_Literal are new.&nbsp;</div>

<H4 Class="centered">Wording Changes from Ada 2022</H4>
<div class="paranum"><a name="p24.b">24.b/6</a></div>
<div class="Annotations">{<I><A HREF="http://www.ada-auth.org/cgi-bin/cvsweb.cgi/AI22s/AI22-0003-1.TXT">AI22-0003-1</A></I>} 
<span class="insert6"><B>Corrigendum:</B> Removed a vestigial Legality 
Rule that conflicted with the blanket rules for nonoverridable aspects.</span> 
</div>

<HR>
<div style="margin-top: 0.0em; margin-bottom: 0.6em"><A HREF="AA-TOC.html"><IMG SRC="cont.gif" ALT="Contents" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-0-4.html"><IMG SRC="index.gif" ALT="Index" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-STDS.html"><IMG SRC="lib.gif" ALT="References" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-SRCH.html"><IMG SRC="find.gif" ALT="Search" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-2.html"><IMG SRC="prev.gif" ALT="Previous" BORDER=0></A>&nbsp;
&nbsp;<A HREF="AA-4-3.html"><IMG SRC="next.gif" ALT="Next" BORDER=0></A>&nbsp;
</div>
<DIV Style="margin-top:0.0em"><IMG SRC="AE_logo.gif" height=100 width=113 align=right ALT="Ada-Europe">
<SPAN Style="vertical-align: middle; font-size:120%">Ada 2005 and 2012 Editions sponsored in part by <SPAN Style="font-size: 125%"><A HREF="http://www.ada-europe.org/"><B>Ada-Europe</B></A></SPAN></SPAN></DIV>
</BODY>
</HTML>
